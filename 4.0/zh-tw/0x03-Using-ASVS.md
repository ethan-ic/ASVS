# 使用 ASVS

ASVS 有兩個主要目標：

* 幫助組織開發和維護安全的應用程式。
* 允許安全服務廠商、安全工具供應商和消費者調整他們的要求和產品。

## 應用安全驗證級別

應用程式安全驗證標準（ASVS）定義了三個安全驗證級別，每個級別的深度都在增加。

* ASVS Level 1 適用於低保證級別，可通過滲透測試驗證。
* ASVS Level 2 適用於包含敏感資料的應用程式（需要保護），是大多數應用程式的推薦級別。
* ASVS Level 3 適用於最關鍵的應用程式：執行高價值交易、包含敏感醫療資料的應用程式，或任何需要最高級別信任的應用程式。

每個 ASVS 級別都包含一個安全要求的列表。其中的每一項，都可以對應到開發人員必須在軟體中建立的特定安全特性和功能。

![ASVS Level](https://raw.githubusercontent.com/OWASP/ASVS/master/4.0/images/asvs_40_levels.png "ASVS Level")

圖 1 - OWASP 應用程式安全驗證標準級別（4.0 版）

Level 1 是唯一可以由人類進行滲透測試的級別。 所有其他的等級都需要接觸文件、原始碼、配置以及開發人員。 然而，即使 L1 允許通過 “黑盒”（無文件和無原始碼）測試來驗證，但它並不是有效的保證活動，應儘量避免單獨採用。 惡意攻擊者有大量的時間，但大多數滲透測試在幾周內就會結束。 防禦者需要在合理的時間內，建立安全控制，發現、解決和保護所有的弱點，檢測和應對惡意攻擊者。惡意攻擊者的時間基本上是無限的，只需要一處漏洞，或者一個缺少檢測的弱點就可以成功。 黑盒測試，通常在開發結束時快速執行，或者根本不執行，完全無法應對這種不對稱性。

在過去的 30 多年裡，黑盒測試一次又一次被證明會遺漏關鍵的安全問題，直接導致了越來越多的大規模漏洞。 我們強烈鼓勵使用廣泛的安全保證和驗證，包括用 Level 1 的原始碼主導的（混合）滲透測試來取代滲透測試，在整個開發過程中可以充分接觸到開發人員和文件。 金融監管機構不會容忍 “無法接觸賬本、交易樣本或執行控制的人員” 的外部財務審計。 行業和政府必須要求軟體工程領域具有相同的透明度標準。

我們強烈鼓勵在開發過程中使用安全工具。 構建管道可以持續使用 DAST 和 SAST 工具，來查詢容易發現的、不應該出現的安全問題。

在沒有人工協助的情況下，ASVS 中超過半數的驗證項無法被自動化工具和線上掃描完成。 如果需要對每次構建進行全面的自動化測試，則使用自定義單元和整合測試的組合，以及由構建發起的線上掃描。 業務邏輯缺陷和訪問控制測試只能使用人工協助。 這些內容應該變成單元和整合測試。

## 如何使用這個標準

使用應用程式安全驗證標準（ASVS）的最佳方法之一，是將其作為一個藍圖，建立一個針對您的應用程式、平臺或組織的安全編碼檢查表。 建議您根據不同的專案場景，針對其中最重要的安全要求，在定製的 ASVS 中增加關注。

### Level 1 - 第一步，自動化，或全景圖

如果一個應用程式能夠充分防禦 OWASP Top10 或其他類似檢查表中提到的那些容易發現的安全漏洞，那麼它就達到了 ASVS Level 1。

Level 1，是所有應用程式應爭取的最低限度。 作為多個階段工作的第一步，或是當應用程式不儲存或處理敏感資料，因此不需要 L2 或 L3 的更嚴格的控制時，它也是有用的。 Level 1 控制可以通過工具自動檢查，也可以在不訪問原始碼的情況下簡單地手動檢查。我們認為 Level 1 是所有應用程式的最低要求。

對應用程式的威脅，往往來自那些使用簡單、省力的技術來識別 “簡單漏洞” 的攻擊者。 這與堅定的攻擊者形成對比，後者將花費集中的精力專門針對應用程式。 如果您的應用程式處理的資料具有很高的價值，您很少會止步於 Level 1。

### Level 2 - 大多數應用程式

如果一個應用程式能夠充分抵禦當今與軟體相關的大多數風險，那麼它就達到了 ASVS Level 2（級別或標準）。

Level 2 確保安全控制在應用程式中得到有效的落實。 Level 2 通常適用於處理重要 B2B 事務（B2B，Business-to-Business）的應用程式， 包括處理醫療保健資訊、實施關鍵業務、實現敏感功能、或處理敏感資產的應用程式，或完整性是保護其業務的關鍵方面的行業，例如打擊遊戲外掛和作弊的遊戲行業。

對 Level 2 應用程式的威脅，通常是熟練的和有動機的攻擊者，他們專注於特定的目標，使用工具和技術有效地發現和利用應用程式中的風險。

### Level 3 - 高價值、高保證或高安全性

ASVS Level 3，是 ASVS 內的最高級別驗證。 這個級別通常保留給需要大量安全驗證的應用，例如軍事、健康、安全和關鍵基礎設施等領域的應用。

對於執行關鍵功能的應用程式，組織可能需要 ASVS Level 3，在這種情況下，故障可能會嚴重影響組織的運作，甚至影響其生存。下面提供了有關 ASVS 3Level 3 應用的示例指導。 如果一個應用程式能夠充分防禦進階應用程式的安全漏洞，並顯示出良好的安全設計原則，那麼它就達到了 ASVS Level 3（或更進階）。

相對於其他級別，ASVS Level 3 的應用程式需要更深入分析架構、編碼和測試。安全的應用程式以有意義的方式模組化（促進復原力、擴充性，以及最重要的安全層級），每個模組（經由網路連線 及/或 實體實例區隔），負責自己的安全職責（縱深防禦），都需要適當的記錄。職責包括確保機密性（例如加密）、完整性（例如交易、輸入驗證）、可用性（例如優雅地處理負載）、身份驗證（包括系統之間）、授權和審計（日誌記錄）等控制。

## 在實踐中應用 ASVS

不同的威脅有不同的動機。某些行業有獨特的資訊和技術資產，以及特定領域的監管要求。

我們強烈建議，各組織根據其業務性質，深入研究其獨特的風險特徵，並根據該風險和業務要求，確定適當的 ASVS 級別。

## 如何引用 ASVS 要求

每個需求都有一個識別符號，格式為 `<chapter>.<section>.<requirement>` ，每個元素都是一個數字，例如：`1.11.3` 。
- `<chapter>` 值對應於需求出現的章，例如：所有 `1.#.#` 的需求都來自 `Architecture` 這一章。
- `<section>` 值對應於該章中需求出現的小節，例如：所有 `1.11.#` 需求都在 `Architecture` 章的 `Business Logic Architecture` 部分。
- `<requirement>` 值對應該章的具體要求，例如：本標準的 4.0.3 版本中的 `1.11.3` 是：

> 驗證所有高價值業務邏輯流（包括身份驗證、會話管理和訪問控制）都是執行緒安全的，並且可以防止 “檢查時間和使用時間不一致” 導致的條件競爭問題。

識別符號可能會在標準版本之間發生變化，因此在其他文件、報告或工具最好使用以下格式： `v<version>-<chapter>.<section>.<requirement>` ，其中：“version” 是 ASVS 版本標籤。 例如：`v4.0.3-1.11.3` 將被理解為特指版本 4.0.3 中 “架構” 這一章中 “業務邏輯架構” 這一節的第 3 項要求。 （可概括為 `v<version>-<requirement_identifier>`。）

注意：版本部分前面的 `v` 要小寫。

如果使用不包括 `v<version>` 的識別符號，那麼它們應該被認為是指最新的應用程式安全驗證標準內容。顯然，隨著標準的增長和變化，這將導致問題，這就是為什麼作者或開發者應該將版本包括進去。

ASVS 需求列表，以 CSV、JSON 和其他可能對參考或程式設計有用的格式提供。